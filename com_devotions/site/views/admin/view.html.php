<?php defined('_JEXEC') or die('Restricted access');jimport('joomla.application.component.view');$doc = &JFactory::getDocument();$style = '#myform input[type=text], textarea {  width: 300px;}';$doc->addStyleDeclaration($style);class DevotionsViewAdmin extends JView {    function display ($tpl = null) {        $user =& JFactory::getUser();        $session =& JFactory::getSession();        $model =& $this->getModel('admin');           if ($user->get('guest')) {                    header("Location: index.php");            exit();        }                $pastor =  $model->getPastor();                if (!JRequest::getVar('layout')) {            $devotions = $model->getDevotions($pastor->id);            $pagination = $model->getPagination($pastor->id);                        $this->assignRef('devotions', $devotions);            $this->assignRef('pagination', $pagination);            $this->assignRef('pastor', $pastor);        }                if (JRequest::getVar('layout') == 'edit') {            $dId =& JRequest::getVar('dId');            $devotion = $model->getDevotion($dId);                        $this->assignRef('devotion', $devotion);            $this->assignRef('pastor', $pastor);        }                if (JRequest::getVar('layout') == 'comments') {            $dId =& JRequest::getVar('dId');            $pagination = $model->commentPagination($dId);            $devotion = $model->getDevotion($dId);            $comments = $model->getComments($dId);                        $this->assignRef('comments', $comments);            $this->assignRef('pagination', $pagination);            $this->assignRef('dId', $dId);            $this->assignRef('theme', $devotion->theme);        }        if(!$model->hasProfile($user->id)) {            $tpl = 'register';        } else {            $this->assignRef('pastor', $pastor);        }                parent::display($tpl);    }}